/* iOS PWA 视口修复 */
:root {
  --sat: env(safe-area-inset-top);
  --sar: env(safe-area-inset-right);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
}

/* iOS PWA 全屏适配 */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari */
  body {
    min-height: 100vh;
    /* 使用 -webkit-fill-available 来适配 iOS Safari */
    min-height: -webkit-fill-available;
  }
}

/* 使用 dvh 单位来解决 iOS Safari 的视口问题 */
@supports (height: 100dvh) {
  body {
    min-height: 100vh;
    min-height: 100dvh;
  }
  
  #__next {
    min-height: 100vh;
    min-height: 100dvh;
  }
}

/* iOS 安全区域内边距 */
#__next {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 固定 header 的安全区域已在 #__next 中处理 */
header.sticky {
  /* header 已经在 #__next 的 padding 内，不需要额外的 padding-top */
  top: 0;
}

/* iOS PWA 检测 */
@media (display-mode: standalone) {
  /* PWA 模式下的特殊处理 */
  body {
    background-color: var(--background);
  }
}

/* 底部安全区域 */
.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}